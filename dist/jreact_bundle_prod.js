!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(module,exports){var JReact;!function(JReact){"use strict";JReact.DEBUG=!1,JReact.TEST=!1,JReact.INSTANCE="instance",JReact.DATA_KEY="data-key",JReact.RSL_VALID_REQUIRED="rsl-valid-required",JReact.RSL_INVALID_REQUIRED="rsl-invalid-required",JReact.RSL_VALID_PATTERN="rsl-valid-pattern",JReact.RSL_INVALID_PATTERN="rsl-invalid-pattern",JReact.DATA_FIXED_ITEM="data-fixed-item",JReact.DATA_REQUIRED="data-required",JReact.DATA_PATTERN="data-pattern",JReact.VALUE="_value";const STYLE="style",CLASS="class";let ATTRIBUTE_MAP={key:JReact.DATA_KEY,className:CLASS};[STYLE,JReact.VALUE,JReact.DATA_REQUIRED,JReact.DATA_PATTERN,"size","maxlength","id","change","checked","click","colspan","contextmenu","disabled","selected","mousedown","mousemove","mouseup","touchend","touchmove","touchstart","type","value","placeholder","title","href","name"].forEach(e=>ATTRIBUTE_MAP[e]=e);class Action{constructor(e,t,n,r){this.type=e,this.payload=t,this.error=n,this.meta=r}}function getInstance(e){return e.data(JReact.INSTANCE)}function setInstance(e,t){e.data(JReact.INSTANCE,t)}function getInstanceKey(e){return getInstanceKeyFromTag(e.getTag(),e.props.key)}function getInstanceKeyFromTag(e,t){let n=e;return Utils.testString(t)&&(n+="["+JReact.DATA_KEY+"="+t+"]"),n}function isSame(e,t){return e===t||null==e&&null==t||(null!=e||null==t)&&((null==e||null!=t)&&(Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(function(n){return e[n]===t[n]})))}function NOOP(){}function createElement(e,t,...n){let r={};if(n.length>1){if(Utils.isStringOrNumber(n[0]))throw new Error("multiple children with string or number");n.forEach(function(t){if(Utils.isStringOrNumber(t))return;let n,o=t;if(null==o.props.key)throw new Error("partially defined child prop keys: "+e);if(n=getInstanceKey(o),r.hasOwnProperty(n))throw new Error("duplicate child prop keys: "+e);r[n]=!0})}return t||(t={}),t.children=n,"function"==typeof e?new e(t):new ComponentDOM(t,e)}function updateProps(e,t,n){Object.keys(e.props).forEach(function(r){let o,s=e.props[r];ATTRIBUTE_MAP.hasOwnProperty(r)&&(o=ATTRIBUTE_MAP[r],"function"==typeof s?n?t.unbind(o):t.bind(o,s):r===STYLE?Object.keys(s).forEach(e=>{t.css(e,n?"":s[e])}):r===JReact.VALUE?n?t.val(null):t.val(s):n?Utils.isBoolean(s)?t.prop(o,!1):t.removeAttr(o):Utils.isBoolean(s)?t.prop(o,s):t.attr(o,s))},e)}function render(e,t,n){let r,o,s,a,l,c,i,p,u=!1,m=!1,d=[],h={},g=getInstanceKey(e);if((m=(i=t.children(g)).length>0)&&(a=getInstance(i))){if(JReact.DEBUG&&(p=i.get(0).outerHTML),n&&(0!=(o=n.next()).length&&getInstanceKey(getInstance(o))===g||(i.detach(),n.after(i))),!a.shouldComponentUpdate(e.props,e.state))return i;c=a.state,a.componentWillReceiveProps(e.props),updateProps(a,i,!0),l=a.props,a.props=e.props,updateProps(a,i),e=a}else u=!0,m||(i=jQuery("<"+e.getTag()+"/>")),e.setElement(i),setInstance(i,e),e.componentWillMount(),updateProps(e,i),m||(n?n.after(i):t.append(i));return e instanceof AutoTemplate?e.renderTemplate():e.props.dangerouslySetInnerHTML?i.html(e.props.dangerouslySetInnerHTML.__html):((s=e.render())?Utils.isArray(s)?d.push(...s):d.push(s):d=e.props.children,d.forEach(e=>{e instanceof Component&&(h[getInstanceKey(e)]=!0)}),i.children().each(function(){let e=jQuery(this),t=getInstance(e);t&&h[getInstanceKey(t)]||e.is("["+JReact.DATA_FIXED_ITEM+"]")||unmountElement(e)}),e.refs={},d.forEach(function(t){t instanceof Component?(r=render(t,i,r),null!=t.props.ref&&(Utils.isFunction(t.props.ref)?t.props.ref.call(e,r):""!=t.props.ref&&(e.refs[t.props.ref]=r))):i.text(t)})),u?e.componentDidMount():e.componentDidUpdate(l,c),JReact.DEBUG&&!u&&p===i.get(0).outerHTML&&(console.log(`rendered but same:\n${e.constructor.name}\n${getInstanceKey(e)}\n${p}`),console.dir(i.get(0))),i}function renderDOM(e,t){let n=render(e,t);return t.children().each(function(){this!==n[0]&&unmountElement(jQuery(this))}),n}function unmountElement(e,t){let n=getInstance(e);n&&n.componentWillUnmount(),t?e.html(null):e.remove()}JReact.Action=Action,JReact.getInstance=getInstance,JReact.getInstanceKey=getInstanceKey,JReact.getInstanceKeyFromTag=getInstanceKeyFromTag,JReact.isSame=isSame,JReact.NOOP=NOOP,JReact.createElement=createElement,JReact.render=render,JReact.renderDOM=renderDOM;class Component{constructor(e){this.refs={};let t=this.getDefaultProps();t&&(e=jQuery.extend(!0,{},t,e)),this.props=e}getDefaultProps(){return null}getTag(){return"span"}getElement(){return this.element}setElement(e){this.element=e}_getState(){return this.state}_setState(e){this.state=e}render(){return null}renderTemplate(){throw new Error("must be overloaded")}reduce(e,t){return e}shouldComponentUpdate(e,t){return!isSame(this.state,t)||!isSame(this.props,e)}dispatch(e){this.setState(this.reduce(this.state,e))}setState(e){if(this.shouldComponentUpdate(this.props,e)&&(this._setState(e),!JReact.TEST)){let e=this.render();e?Utils.isArray(e)?render(JReact.createElement(this.constructor,this.props,...e),this.element.parent()):renderDOM(e,this.element):this.renderTemplate()}}componentWillReceiveProps(e){}componentWillMount(){}componentDidMount(){}componentWillUnmount(){}componentDidUpdate(e,t){}}JReact.Component=Component;class ComponentDOM extends Component{constructor(e,t){super(e),this.tag=t}getTag(){return this.tag}}JReact.ComponentDOM=ComponentDOM;class AutoTemplate extends Component{constructor(e){super(e)}getTag(){return this.props.tag}getComponents(){return this.props.components}getComponentByKey(e){return getPropByKey(e,this.getComponents())}getTemplateHTML(){return getTemplateContent(this.props.templateID)}renderTemplate(){let e=this.getTemplateHTML(),t=this.getElement();this.preRenderTemplate(),Utils.isUndefined(e)||t.html()||t.html(e),this.postRenderTemplate()}preRenderTemplate(){this._preRenderTemplate();let e={},t=this.getComponents(),n=this.getTemplateHTML();t&&t.forEach(t=>{e[getInstanceKeyFromTag(t.tag,t.key)]=!0}),this.getElement().children("["+JReact.DATA_KEY+"]").each(function(){let t=jQuery(this),r=getInstance(t);r&&e[getInstanceKey(r)]||unmountElement(t,!Utils.isUndefined(n))})}_preRenderTemplate(){}postRenderTemplate(){let e=this.getComponents(),t=null,n=this.getTemplateHTML();this.refs={},e&&e.forEach(e=>{t=render(createElement(evalComponent(e),e),this.getElement(),Utils.isUndefined(n)?t:void 0),this.refs[e.key]=t}),this._postRenderTemplate()}_postRenderTemplate(){}}function evalComponent(props){return eval(props.nameSpace+"."+props.name)}JReact.AutoTemplate=AutoTemplate;class StatelessAutoTemplate extends AutoTemplate{constructor(e){super(e)}}function getDynamicComponent(e,t){return getPropByKey(e,t.data.dynamicComponents)}function getPropByKey(e,t){if(t)for(let n of t)if(n.key==e)return n;return null}JReact.StatelessAutoTemplate=StatelessAutoTemplate,JReact.getDynamicComponent=getDynamicComponent,JReact.getPropByKey=getPropByKey;class DynamicStatelessAutoTemplate extends StatelessAutoTemplate{constructor(e){super(e)}getDynamicComponentByKey(e){return getPropByKey(e,this.props.data.dynamicComponents)}}JReact.DynamicStatelessAutoTemplate=DynamicStatelessAutoTemplate;class ComponentController{constructor(e,...t){this.state=e,this.converters=t}dispatch(e){let t=this.getActionHandler(e.type),n=Utils.extend(this.state);this.state=t.reduce(this,e),Utils.isFunction(t.preRenderTemplate)?(this.preRenderStart(e),t.preRenderTemplate(this,e).then(r=>{this.state=r,this.render(t,e),this.preRenderSuccess(e,n,r),this.preRenderFinally(e,n,r)},t=>{this.state=n,this.preRenderError(e,n,t),this.preRenderFinally(e,n,t)})):this.render(t,e)}render(e,t){if(!JReact.TEST){for(let e of this.converters){let t=e.getComponent(),n=e.convert(this.state);render(JReact.createElement(t.constructor,n),t.getElement().parent())}Utils.isFunction(e.postRenderTemplate)&&e.postRenderTemplate(this,t)}}getState(){return this.state}getActionHandler(e){throw new Error("getActionHandler should be overridden")}preRenderStart(e){}preRenderSuccess(e,t,n){}preRenderError(e,t,n){}preRenderFinally(e,t,n){}}JReact.ComponentController=ComponentController;class SingleComponentController extends ComponentController{constructor(e){super(e.props,new SingleComponentConverter(e))}}JReact.SingleComponentController=SingleComponentController;class SingleComponentConverter{constructor(e){this.component=e}getComponent(){return this.component}convert(e){return e}}function hasInvalidPattern(e){return e.hasClass(JReact.RSL_INVALID_PATTERN)}function hasInvalidRequired(e){return e.hasClass(JReact.RSL_INVALID_REQUIRED)}JReact.SingleComponentConverter=SingleComponentConverter,JReact.hasInvalidPattern=hasInvalidPattern,JReact.hasInvalidRequired=hasInvalidRequired;let templateCache={};function getTemplateContent(e){return templateCache[e]}function bootstrap(e){let t;for(let n=0;n<e.scripts.length;n++)"text/html"===(t=e.scripts[n]).type&&t.id&&(templateCache[t.id]=t.text)}JReact.getTemplateContent=getTemplateContent,JReact.bootstrap=bootstrap}(JReact||(JReact={}))}]);
//# sourceMappingURL=jreact_bundle_prod.js.map